
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Weglot Library Documentation</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;shell&quot;,&quot;php&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="php">php</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="introduction">Introduction</a>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="authentication">Authentication</a>
          </li>
          <li>
            <a href="#endpoints" class="toc-h1 toc-link" data-title="endpoints">Endpoints</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#translate" class="toc-h2 toc-link" data-title="translate">Translate</a>
                  </li>
                  <li>
                    <a href="#status" class="toc-h2 toc-link" data-title="status">Status</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#parser" class="toc-h1 toc-link" data-title="parser">Parser</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#config-providers" class="toc-h2 toc-link" data-title="config-providers">Config providers</a>
                  </li>
                  <li>
                    <a href="#detailled-process" class="toc-h2 toc-link" data-title="detailled-process">Detailled process</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#caching" class="toc-h1 toc-link" data-title="caching">Caching</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#php" class="toc-h2 toc-link" data-title="php">PHP</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#resources" class="toc-h1 toc-link" data-title="resources">Resources</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#bottype" class="toc-h2 toc-link" data-title="bottype">BotType</a>
                  </li>
                  <li>
                    <a href="#wordtype" class="toc-h2 toc-link" data-title="wordtype">WordType</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href="https://dashboard.weglot.com/register?origin=9">Register for a Weglot API Key</a></li>
            <li><a href="https://github.com/weglot">Documentation by Weglot</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Weglot is a set of libraries that allows you to quickly and easily use the Weglot API and to translate your website seamlessly and delivers it in any languages. </p>

<p>Our API is following REST guidelines and is HTTP based.</p>

<p>Main feature of Weglot library isn&#39;t the library itself but the <a href="#parser">Parser</a> we provides with it. It permit you to get high-level processing of your HTML page with ease.</p>
<h1 id='authentication'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Client</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="s1">'my_api_key'</span><span class="p">);</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct parameter with each request</span>
curl <span class="s2">"https://api.weglot.com/status?api_key=my_api_key"</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>my_api_key</code> with your Weglot API key.</p>
</blockquote>

<p>Weglot uses API Keys to allow access to the API. You can register a new Weglot API Key at: <a href="https://dashboard.weglot.com/register">Register</a>.</p>

<p>Weglot expects for the API Key to be included in all API requests to the server in the URL as a parameter that looks like the following:</p>

<p><code>https://api.weglot.com/endpoint?api_key=my_api_key</code></p>

<aside class="notice">
Make sure to replace <code>my_api_key</code> with your Weglot API key.
</aside>
<h1 id='endpoints'>Endpoints</h1><h2 id='translate'>Translate</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\Enum\BotType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\TranslateEntry</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\WordEntry</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\Enum\WordType</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Client</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Endpoint\Translate</span><span class="p">;</span>

<span class="c1">// TranslateEntry parameters
</span><span class="nv">$params</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">'language_from'</span> <span class="o">=&gt;</span> <span class="s1">'en'</span><span class="p">,</span>
    <span class="s1">'language_to'</span> <span class="o">=&gt;</span> <span class="s1">'de'</span><span class="p">,</span>
    <span class="s1">'title'</span> <span class="o">=&gt;</span> <span class="s1">'Lorem ipsum dolor sit amet'</span><span class="p">,</span>
    <span class="s1">'request_url'</span> <span class="o">=&gt;</span> <span class="s1">'https://foo.bar/'</span><span class="p">,</span>
    <span class="s1">'bot'</span> <span class="o">=&gt;</span> <span class="nx">BotType</span><span class="o">::</span><span class="na">HUMAN</span>
<span class="p">];</span>

<span class="nv">$translate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">TranslateEntry</span><span class="p">(</span><span class="nv">$params</span><span class="p">);</span>
<span class="nv">$translate</span><span class="o">-&gt;</span><span class="na">getInputWords</span><span class="p">()</span>
    <span class="o">-&gt;</span><span class="na">addOne</span><span class="p">(</span><span class="k">new</span> <span class="nx">WordEntry</span><span class="p">(</span><span class="s1">'This is a blue car'</span><span class="p">,</span> <span class="nx">WordType</span><span class="o">::</span><span class="na">TEXT</span><span class="p">))</span>
    <span class="o">-&gt;</span><span class="na">addOne</span><span class="p">(</span><span class="k">new</span> <span class="nx">WordEntry</span><span class="p">(</span><span class="s1">'This is a black car'</span><span class="p">,</span> <span class="nx">WordType</span><span class="o">::</span><span class="na">TEXT</span><span class="p">));</span>

<span class="c1">// Client
</span><span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">'WG_API_KEY'</span><span class="p">));</span>
<span class="nv">$translate</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Translate</span><span class="p">(</span><span class="nv">$translate</span><span class="p">,</span> <span class="nv">$client</span><span class="p">);</span>
<span class="nv">$translated</span> <span class="o">=</span> <span class="nv">$translate</span><span class="o">-&gt;</span><span class="na">handle</span><span class="p">();</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -X POST <span class="s2">"https://api.weglot.com/translate?api_key=my_api_key"</span> <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d <span class="se">\</span>
<span class="s1">'
{
  "l_from": "en",
  "l_to": "fr",
  "title": "My awesome page",
  "request_url": "https://www.website.com/",
   "words": [
         {
            "t": "1",
            "w": "This is a blue car"
        },
        {
            "t": "1",
            "w": "This is a black car"
        }
    ]
}'</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">  
   </span><span class="s2">"l_from"</span><span class="p">:</span><span class="s2">"en"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"l_to"</span><span class="p">:</span><span class="s2">"fr"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"My awesome page"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_url"</span><span class="p">:</span><span class="s2">"https:</span><span class="se">\/\/</span><span class="s2">www.website.com</span><span class="se">\/</span><span class="s2">"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"bot"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
   </span><span class="s2">"from_words"</span><span class="p">:[</span><span class="w">  
      </span><span class="s2">"This is a blue car"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"This is a black car"</span><span class="w">
   </span><span class="p">],</span><span class="w">
   </span><span class="s2">"to_words"</span><span class="p">:[</span><span class="w">  
      </span><span class="s2">"C'est une voiture bleue"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"C'est une voiture noire"</span><span class="w">
   </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This endpoint retrieves all translations. It takes an array of sentences in an original languages in input and output the same array of sentences but translated in another languages.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>POST https://api.weglot.com/translate</code></p>
<h3 id='json-body-parameters'>JSON Body Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>l_from</td>
<td>true</td>
<td>ISO 639-1 code of the original language</td>
</tr>
<tr>
<td>l_to</td>
<td>true</td>
<td>ISO 639-1 code of the destination language</td>
</tr>
<tr>
<td>words</td>
<td>true</td>
<td>array of sentence in original language. Each words contains 2 parameters</td>
</tr>
<tr>
<td>words[t]</td>
<td>true</td>
<td>the type of the word : check at <a href="#wordtype">WordType resource</a> for more details</td>
</tr>
<tr>
<td>words[w]</td>
<td>true</td>
<td>the sentence to translate</td>
</tr>
<tr>
<td>bot</td>
<td>false</td>
<td>link to user agent : check at <a href="#bottype">BotType resource</a> for more details</td>
</tr>
<tr>
<td>request_url</td>
<td>true</td>
<td>the URL where the request is from</td>
</tr>
<tr>
<td>title</td>
<td>false</td>
<td>the title of the page where these sentences come from</td>
</tr>
</tbody></table>
<h3 id='returned-content'>Returned Content</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>l_from</td>
<td>ISO 639-1 code of the original language</td>
</tr>
<tr>
<td>l_to</td>
<td>ISO 639-1 code of the destination language</td>
</tr>
<tr>
<td>title</td>
<td>the title of the page where these sentences come from</td>
</tr>
<tr>
<td>request_url</td>
<td>the URL where the request is from</td>
</tr>
<tr>
<td>bot</td>
<td>link to user agent : check at <a href="#bottype">BotType resource</a> for more details</td>
</tr>
<tr>
<td>from_words</td>
<td>array of sentence in original language.</td>
</tr>
<tr>
<td>to_words</td>
<td>array of sentence in destination language. This is the important part !</td>
</tr>
</tbody></table>
<h2 id='status'>Status</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Client</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Endpoint\Status</span><span class="p">;</span>

<span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">'WG_API_KEY'</span><span class="p">));</span>
<span class="nv">$status</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Status</span><span class="p">(</span><span class="nv">$client</span><span class="p">);</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl -I <span class="s2">"https://api.weglot.com/status?api_key=my_api_key"</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight plaintext"><code>HTTP/1.1 200 OK
</code></pre>
<p>This endpoint is used as check-alive. You can use it to check if Weglot API is up and running.</p>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://api.weglot.com/status</code></p>
<h3 id='returned-content'>Returned Content</h3>
<p>The returned content is just a simple empty JSON array. The interesting part is to check if status code is <code>200</code>.</p>

<aside class="notice">
There is no real "content" for this endpoint, you should only check <code>200</code> status-code.
</aside>

<aside class="warning">
This is only a check-alive endpoint, don't spam it.
</aside>
<h1 id='parser'>Parser</h1>
<p>The Parser allows you to fetch a whole HTML page, to extract sentences &amp; to inject them back in your HTML. It works on top of our library to let us manage every request without bothering you managing communication.</p>
<h2 id='config-providers'>Config providers</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Parser\ConfigProvider\ServerConfigProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Parser\ConfigProvider\ManualConfigProvider</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\Enum\BotType</span><span class="p">;</span>

<span class="c1">// Url to parse
</span><span class="nv">$url</span> <span class="o">=</span> <span class="s1">'https://foo.bar/baz'</span><span class="p">;</span>

<span class="c1">// Manual Config
</span><span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ManualConfigProvider</span><span class="p">(</span><span class="nv">$url</span><span class="p">,</span> <span class="nx">BotType</span><span class="o">::</span><span class="na">HUMAN</span><span class="p">);</span>

<span class="c1">// Config with $_SERVER variables
</span><span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ServerConfigProvider</span><span class="p">();</span>

<span class="c1">// Change title behavior from automatic to manual
</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setTitle</span><span class="p">(</span><span class="s1">'Some title'</span><span class="p">);</span>

<span class="c1">// Change back title behavior to automatic
</span><span class="nv">$config</span><span class="o">-&gt;</span><span class="na">setTitle</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</code></pre>
<p>Some of the parameters we usually need in a (Translate query)[#translate] are skipped with config providers, actually we have two of them availables:</p>

<ul>
<li><code>ManualConfigProvider</code>, data is fetched from what you give to the provider.</li>
<li><code>ServerConfigProvider</code>, data is fetched inside of the <code>Parser</code> (through <code>loadFromServer()</code> function) from the <code>$_SERVER</code> variable. Be carefull, it won&#39;t work if your environment doesn&#39;t fill it.</li>
</ul>

<p>In addition to both providers, we have two ways to set the <code>title</code> that we send to Weglot API.
On both provider construct function, you&#39;ll have a <code>$title</code> variable that is <code>null</code> by default.
If you let it with the default value, you&#39;ll be in automatic mode.</p>

<p>Like that, the <code>Parser</code> would seek title tag in the HTML page and use it as <code>title</code>.
If you set it manually, we&#39;ll just use what you&#39;ve put as <code>title</code>.</p>

<aside class="notice">
You still can change <code>title</code> from automatic to manual by using <code>setTitle</code> function on provider (and reverse, by setting it as <code>null</code>).
</aside>
<h2 id='detailled-process'>Detailled process</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Client</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Parser\Parser</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Weglot\Parser\ConfigProvider\ServerConfigProvider</span><span class="p">;</span>

<span class="c1">// Url to parse
</span><span class="nv">$url</span> <span class="o">=</span> <span class="s1">'https://foo.bar/baz'</span><span class="p">;</span>

<span class="c1">// Config with $_SERVER variables
</span><span class="nv">$config</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ServerConfigProvider</span><span class="p">();</span>

<span class="c1">// Fetching url content
</span><span class="nv">$content</span> <span class="o">=</span> <span class="s1">'...'</span><span class="p">;</span>

<span class="c1">// Client
</span><span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">'WG_API_KEY'</span><span class="p">));</span>
<span class="nv">$parser</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Parser</span><span class="p">(</span><span class="nv">$client</span><span class="p">,</span> <span class="nv">$config</span><span class="p">);</span>

<span class="c1">// Run the Parser
</span><span class="nv">$translatedContent</span> <span class="o">=</span> <span class="nv">$parser</span><span class="o">-&gt;</span><span class="na">translate</span><span class="p">(</span><span class="nv">$content</span><span class="p">,</span> <span class="s1">'en'</span><span class="p">,</span> <span class="s1">'de'</span><span class="p">);</span>
</code></pre>
<p>How it works:</p>

<p>Once you hit the <code>translate</code> function, what the <code>Parser</code> does ? Let&#39;s explain all steps, step by step:</p>

<ol>
<li>Receiving &amp; setting both original &amp; destination language.</li>
<li>Depending on your API version, you&#39;ll now pass into <code>ignoredNodes</code> formatter. Basically, <code>ignoredNodes</code> mode is skip some tags into translations by using HTML entities, like that, we would have less sentences sent to Weglot API.</li>
<li>After that, we&#39;re using a library called <a href="https://github.com/weglot/simple_html_dom"><code>simple_html_dom</code></a> (with some internal tweaks) to fetch all HTML content.</li>
<li>Then we check if there is blocks you don&#39;t want to be translated (through <code>$excludeBlocks</code> array that you can set in <code>Parser</code> construct). We fetch them all and add a property to make sure we won&#39;t translate them (you can find this property in <code>Parser::ATTRIBUTE_NO_TRANSLATE</code> constant)</li>
<li>From now, the real deal start, we run Checkers. Checkers are used to match elements in HTML and to retrieve strings to translate.</li>
<li>And we send all strings without duplicates to API through the <a href="#translate">Translate endpoint</a> from the library</li>
<li>We&#39;re getting response with all translated sentences and apply changes to collected HTML nodes from Checkers through Formatters</li>
<li>Finally, we&#39;re returning all the HTML as string with everything translated !</li>
</ol>
<h1 id='caching'>Caching</h1>
<p>Depending on library implementation we added caching to requests that we send to Weglot API.</p>
<h2 id='php'>PHP</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="c1">// Redis init
</span><span class="nv">$redis</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">([</span>
    <span class="s1">'scheme'</span> <span class="o">=&gt;</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">'REDIS_SCHEME'</span><span class="p">),</span>
    <span class="s1">'host'</span>   <span class="o">=&gt;</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">'REDIS_HOST'</span><span class="p">),</span>
    <span class="s1">'port'</span>   <span class="o">=&gt;</span> <span class="nb">getenv</span><span class="p">(</span><span class="s1">'REDIS_PORT'</span><span class="p">),</span>
<span class="p">]);</span>
<span class="nv">$redisPool</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">PredisCachePool</span><span class="p">(</span><span class="nv">$redis</span><span class="p">);</span>

<span class="c1">// Client
</span><span class="nv">$client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Client</span><span class="p">(</span><span class="nb">getenv</span><span class="p">(</span><span class="s1">'WG_API_KEY'</span><span class="p">));</span>
<span class="nv">$client</span><span class="o">-&gt;</span><span class="na">setCacheItemPool</span><span class="p">(</span><span class="nv">$redisPool</span><span class="p">);</span>

<span class="c1">// setting expire
</span><span class="nv">$client</span><span class="o">-&gt;</span><span class="na">getCache</span><span class="p">()</span><span class="o">-&gt;</span><span class="na">setExpire</span><span class="p">(</span><span class="mi">86400</span><span class="p">);</span>
</code></pre>
<p>For PHP, we&#39;re following <a href="https://www.php-fig.org/psr/psr-6/">PSR-6</a> standard about caching.</p>

<p>Basically it can plug to any caching provider as long as you&#39;ve <a href="https://www.php-fig.org/psr/psr-6/">PSR-6</a> adaptor.
You can find <a href="http://www.php-cache.com/en/latest/">many of theses adaptors in this list</a>.</p>

<p>You&#39;ll find an example for a Redis server with Predis library on right pane.</p>
<h3 id='expire'>Expire</h3>
<p>When you use cache we set an expire timer on every items.
By default, this timer is set to 604800 seconds but you can change it anytime you want by using <code>setExpire(int $seconds)</code> method.</p>
<h3 id='granularity'>Granularity</h3>
<p>The cache has changed a bit since its first version.
Originally we used to put the whole request into cache and use cache params to generate an unique ID.
We removed that behavior to focus on more specific caching for each Endpoints.
For example, on Translate endpoint, we&#39;re now caching each words to make sure our request (if there is one) is small as possible.</p>
<h1 id='resources'>Resources</h1><h2 id='bottype'>BotType</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\Enum\BotType</span><span class="p">;</span>

<span class="c1">// You can find all theses values through BotType abstract class
</span><span class="nv">$botType</span> <span class="o">=</span> <span class="nx">BotType</span><span class="o">::</span><span class="na">HUMAN</span><span class="p">;</span>

<span class="c1">// ...
</span></code></pre>
<p>Used to defined how a sentence gonna be used.</p>

<table><thead>
<tr>
<th>Short-name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>HUMAN</td>
<td>0</td>
<td>Sent from human</td>
</tr>
<tr>
<td>OTHER</td>
<td>1</td>
<td>Sent from unknown source</td>
</tr>
<tr>
<td>GOOGLE</td>
<td>2</td>
<td>Sent from Google</td>
</tr>
<tr>
<td>BING</td>
<td>3</td>
<td>Sent from Bing</td>
</tr>
<tr>
<td>YAHOO</td>
<td>4</td>
<td>Sent from Yahoo</td>
</tr>
<tr>
<td>BAIDU</td>
<td>5</td>
<td>Sent from Baidu</td>
</tr>
<tr>
<td>YANDEX</td>
<td>6</td>
<td>Sent from Yandex</td>
</tr>
</tbody></table>
<h2 id='wordtype'>WordType</h2><pre class="highlight php tab-php"><code><span class="cp">&lt;?php</span>
<span class="k">use</span> <span class="nx">Weglot\Client\Api\Enum\WordType</span><span class="p">;</span>

<span class="c1">// You can find all theses values through WordType abstract class
</span><span class="nv">$wordType</span> <span class="o">=</span> <span class="nx">WordType</span><span class="o">::</span><span class="na">TEXT</span><span class="p">;</span>

<span class="c1">// ...
</span></code></pre>
<p>Used to defined how a sentence gonna be used.</p>

<table><thead>
<tr>
<th>Short-name</th>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>OTHER</td>
<td>0</td>
<td>Word is any of the above elements</td>
</tr>
<tr>
<td>TEXT</td>
<td>1</td>
<td>Word is simple text (default)</td>
</tr>
<tr>
<td>VALUE</td>
<td>2</td>
<td>Word is an attribute value</td>
</tr>
<tr>
<td>PLACEHOLDER</td>
<td>3</td>
<td>Word is a placeholder</td>
</tr>
<tr>
<td>META_CONTENT</td>
<td>4</td>
<td>Word is from meta content header</td>
</tr>
<tr>
<td>IFRAME_SRC</td>
<td>5</td>
<td>Word is an iframe source link</td>
</tr>
<tr>
<td>IMG_SRC</td>
<td>6</td>
<td>Word is an image source link</td>
</tr>
<tr>
<td>IMG_ALT</td>
<td>7</td>
<td>Word is an image alternative description</td>
</tr>
<tr>
<td>PDF_HREF</td>
<td>8</td>
<td>Word is a PDF source link</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="php">php</a>
          </div>
      </div>
    </div>
  </body>
</html>
